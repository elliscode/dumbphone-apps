<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Food Diary</title>
    <link rel="stylesheet" href="../css/stylesheet.css"/>
    <link rel="stylesheet" href="css/fooddiary.css"/>
    <link rel="stylesheet" href="../css/loader.css"/>
    <link rel="icon" type="image/png" href="../img/favicon.png"/>
</head>

<body>
<div style="display:inline;"><b><a href="..">Home</a></b> &gt; <b>food-diary</b></div>
<div style="display:inline;"><input onchange="setDate(event)" id="date-picker" type="date"></div>
<div style="position:relative;">
    <div id="input">
        <input class="big" type="text" onkeyup="queueSearch(event)">
        <button onclick="addToList(event)">Add</button>
    </div>
    <ul class="suggestions"></ul>
</div>

<div id="loading">
    <div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
</div>

<div id="servings">
    <input id="servings-amount" type="text" placeholder="amount"/>
    <select id="servings-name" onchange="servingChange(event)">
        <option>Test One</option>
        <option>Test Two</option>
    </select>
    <button style="display:none;" id="servings-edit" onclick="editServing(event)">&#x270E;</button>
    <input type="text" id="servings-text" placeholder="serving name"/>
    <input type="text" id="calories-text" placeholder="calories"/>
    <button id="servings-save" onclick="saveServing(event)">Save</button>
    <button id="servings-create" onclick="createServing(event)">Create</button>
    <button onclick="closeServings(event)">&times;</button>
</div>
<div id="recipe-servings">
    <input id="recipe-servings-amount" type="text" placeholder="amount"/>
    <select id="recipe-servings-name" onchange="servingRecipeChange(event)">
        <option>Test One</option>
        <option>Test Two</option>
    </select>
    <button id="recipe-servings-save" onclick="alterRecipeServing(event)">Save</button>
    <button onclick="closeRecipeServings(event)">&times;</button>
</div>
<div id="food-or-recipe-edit">
    <div id="food-edit">
        <table>
            <tr><td>Name:</td><td><input id="food-edit-name" type="text"></input></td></tr>
            <tr><td>Calories:</td><td><input id="food-edit-calories" type="text"></input></td></tr>
            <tr><td>Fat:</td><td><input id="food-edit-fat" type="text"></input></td></tr>
            <tr><td>Carbs:</td><td><input id="food-edit-carbs" type="text"></input></td></tr>
            <tr><td>Protein:</td><td><input id="food-edit-protein" type="text"></input></td></tr>
            <tr><td>Alcohol:</td><td><input id="food-edit-alcohol" type="text"></input></td></tr>
            <tr><td>Caffeine:</td><td><input id="food-edit-caffeine" type="text"></input></td></tr>
        </table>
        <button id="food-edit-recipe" onclick="displayRecipe(event)">Edit Recipe</button>
        <button id="food-edit-save" onclick="saveFood(event)">Save</button>
        <button onclick="closeFood(event)">&times;</button>
    </div>
    <div id="recipe-edit">
        <table id="ingredients">
        </table>
        <div style="position:relative;">
            <div>
                <input type="text" id="recipe-search" onkeyup="queueSearch(event)">
            </div>
            <ul class="suggestions"></ul>
        </div>
        <div>
            <button id="recipe-edit-food" onclick="displayFood(event)">Edit Food</button>
            <button id="recipe-edit-save" onclick="saveRecipe(event)">Save</button>
            <button onclick="closeFood(event)">&times;</button>
        </div>
    </div>
</div>
<table id="diary" style="border:none;">
</table>
<form class="logout" action="/accounts/logout" method="post">
    <button type="submit">Log out</button>
</form>
<script src="../js/utils.js"></script>
<script src="js/fooddiary.js"></script>
<script>
    const DEBUG = false;
    if (!csrfToken) {
        window.location.replace("../signup.html");
    }
    setDate();
    document.addEventListener("keydown", function (e) {
        if (e.key === 's' && (navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)) {
            e.preventDefault();
        }
    }, false);
    let searches = document.getElementsByClassName("item-text-box");
    for(let i = 0; i < searches.length; i++) {
        search = searches[i];
        search.addEventListener("keyup", function (event) {
            event.preventDefault();
            if (event.keyCode === 13) {
                let inputs = caller.parentElement.getElementsByTagName("input");
                for(let j = 0; j < inputs.length; j++) {
                    inputs[j].click();
                    break;
                }
            }
        });
    }
    const loader = document.getElementById('loading');
</script>
</body>

</html>